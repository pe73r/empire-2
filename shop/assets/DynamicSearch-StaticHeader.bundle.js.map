{"version":3,"sources":["webpack:///./source/scripts/components/search/SearchForm.js","webpack:///./source/scripts/Search.js","webpack:///./source/scripts/components/search/LiveSearchTemplates.js","webpack:///./source/scripts/components/search/LiveSearch.js","webpack:///./source/scripts/Layout.js","webpack:///./source/scripts/helpers/Quantity.js","webpack:///./source/scripts/Forms.js"],"names":["sanitizeCategory","value","replace","SearchForm","$container","options","container","form","querySelector","filter","isLiveSearch","liveSearch","setCategory","events","EventHandler","register","e","submitHandler","filterLabel","target","newValue","innerHTML","classList","add","dataset","filterAll","remove","hideFilterIfMobile","Layout","isLessThanBreakpoint","onBreakpointChange","unregisterAll","event","preventDefault","currentTarget","cloneNode","termsInput","style","position","left","bottom","visibility","terms","indexOf","split","join","trim","window","document","body","appendChild","submit","Search","searchType","type","view","inProgress","xhr","XMLHttpRequest","ActiveXObject","_xhrLoad","bind","_xhrError","_xhrAbort","_bindEvents","addEventListener","response","readyState","status","JSON","parse","responseText","emit","message","error","term","abort","url","Theme","routes","search_url","params","q","searchParams","Object","keys","map","key","encodeURIComponent","open","setRequestHeader","send","EventEmitter","ContentItem","contentItem","title","ContentResultsHeader","context","content_results","ContentResults","props","content","$title","contentItems","$","ContentNoResults","no_results","ProductPriceCompareAt","price","compare_at_price","ProductPriceMain","ProductPrice","onSale","consistentSaved","$compareAt","$price","ProductContent","product","on_sale","consistent_saved","swatchCount","swatch_count","ProductImage","image","ProductItem","enableImages","$image","$content","ProductResults","products","productItems","ProductNoResults","category","no_results_products","title_in_category","all_products_collection_url","view_all_products","ResultsFooter","view_all_results","MAX_RESULTS","LiveSearch","$els","settings","$el","$header","closeEvents","enableContent","enable_content","enable_images","$form","find","$input","$button","$takeOverButton","$filter","$flyDown","$searchResults","$searchPlaceholder","$quickLinks","staticSearch","search","_search","_documentFocus","_searchCancelled","_searchComplete","_searchError","on","_closeEsc","stopPropagation","focus","_closeFlyDown","_closeTakeOver","debounce","_onSearchFocus","layout","_openTakeOver","_shouldOpenFlyDown","_openFlyDown","forEach","off","unload","addClass","invalidKeyStrokes","val","hasTerms","length","html","_toggleButton","_updateFlyDown","execute","console","warn","log","sanitizedTerms","slice","results","noResults","footer","$productResults","$contentResults","each","i","el","Shopify","formatMoney","money_format","append","disable","attr","removeClass","removeAttr","hasResults","children","data","$window","$document","placeholder","hasNoResults","hasPreviousResults","hasQuickLinks","retainFocus","hasClass","$closest","closest","eventHandlers","previousBreakpoint","getBreakpoints","getComputedStyle","documentElement","getPropertyValue","getBreakpoint","currentBreakpoint","eventHandler","previous","current","breakpoint","inclusive","breakpoints","comparison","isGreaterThanBreakpoint","isBreakpoint","some","push","offBreakpointChange","index","splice","Quantity","$inputParent","$selectParent","$select","_watchSelect","_watchInput","baseValue","parseInt","isNaN","_validateValue","trigger","select","Forms","selector","filledClass","fieldSelector","quantityItems","$quantityWrapper","_toggleFilled","_checkFilled","quantityItem","$target","isFilled","is","toggleClass"],"mappings":"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","file":"DynamicSearch-StaticHeader.bundle.js","sourcesContent":["import EventHandler from '@pixelunion/events';\nimport Layout from '../../Layout';\n\nfunction sanitizeCategory(value) {\n  return value.replace(/(tag|product_type):(searchfilter_)?/, '');\n}\n\nexport default class SearchForm {\n  constructor($container, options = {}) {\n    this.container = $container[0];\n    this.form = this.container.querySelector('[data-live-search-form]');\n    this.filter = this.container.querySelector('[data-live-search-filter]');\n\n    this.isLiveSearch = options.liveSearch ? options.liveSearch : false;\n    this.setCategory = options.setCategory || (() => { /* do nothing */ });\n\n    this.events = new EventHandler();\n\n    this.events.register(this.form, 'submit', e => this.submitHandler(e));\n\n    if (this.filter) {\n      this.filterLabel = this.container.querySelector('[data-live-search-filter-label]');\n\n      // page-search-form uses a hidden input to persist the filter, in which case\n      // this.filter exists, but this.filterLabel does not.\n      if (this.filterLabel) {\n        this.setCategory(this.filterLabel.value);\n\n        this.events.register(this.filter, 'change', e => {\n          const { value } = e.target;\n          if (value) {\n            const newValue = sanitizeCategory(value);\n            this.filterLabel.innerHTML = newValue;\n            this.setCategory(newValue);\n            this.form.classList.add('live-search-filter-active');\n          } else {\n            this.filterLabel.innerHTML = e.target.dataset.filterAll;\n            this.form.classList.remove('live-search-filter-active');\n            this.setCategory('');\n          }\n        });\n      }\n\n      const hideFilterIfMobile = () => {\n        if (Layout.isLessThanBreakpoint('S')) {\n          this.filter.value = '';\n          this.form.classList.remove('live-search-filter-active');\n          if (this.filterLabel) {\n            this.filterLabel.innerHTML = this.filter.dataset.filterAll;\n          }\n        }\n      };\n\n      hideFilterIfMobile();\n      Layout.onBreakpointChange(() => hideFilterIfMobile());\n    }\n  }\n\n  unload() {\n    this.events.unregisterAll();\n  }\n\n  submitHandler(event) {\n    event.preventDefault();\n\n    const form = event.currentTarget.cloneNode(true);\n    const termsInput = form.querySelector('[name=q]');\n\n    form.style.position = 'absolute';\n    form.style.left = '-1000px';\n    form.style.bottom = '-1000px';\n    form.style.visibility = 'hidden';\n\n    let terms = termsInput.value;\n\n    if (this.isLiveSearch && !terms) {\n      return;\n    }\n\n    // Adds `*` after each word in search terms, doesn't add to last word\n    if (terms.indexOf(' ') > 0) {\n      terms = terms.split(' ').join('* ').trim();\n    }\n\n    // Adds `*` at the end of the search terms\n    terms = `${terms}*`;\n\n    // Add field filter\n    terms = this.filter && this.filter.value ? `${terms} ${this.filter.value}` : terms;\n\n    // Update value\n    termsInput.value = terms;\n\n    // Forms must be in the browser context in order to submit\n    window.document.body.appendChild(form);\n    form.submit();\n  }\n}\n","import EventEmitter from 'eventemitter2';\n\n/**\n * Search API Class\n */\nexport default class Search extends EventEmitter {\n  /**\n   * Create a new Search instance, and override defaults\n   *\n   * @param options\n   * @property {string} options.type - Search restriction. Use 'article', 'page', 'product', or ''\n   * @property {string} options.view - Search template suffix. Specify different templates as needed\n   */\n  constructor(options = {}) {\n    super();\n\n    this.searchType = options.type || '';\n    this.view = options.view || 'json';\n\n    this.inProgress = false;\n\n    this.xhr = window.XMLHttpRequest\n      ? new XMLHttpRequest()\n      : new ActiveXObject('Microsoft.XMLHTTP');\n\n    this._xhrLoad = this._xhrLoad.bind(this);\n    this._xhrError = this._xhrError.bind(this);\n    this._xhrAbort = this._xhrAbort.bind(this);\n\n    this._bindEvents();\n  }\n\n  _bindEvents() {\n    this.xhr.addEventListener('load', this._xhrLoad);\n    this.xhr.addEventListener('error', this._xhrError);\n    this.xhr.addEventListener('abort', this._xhrAbort);\n  }\n\n  /**\n   * XHR was successfull\n   *\n   * @description XHR completed successfully\n   * @param {object} event\n   * @fires Search#complete\n   * @private\n   */\n  _xhrLoad(event) {\n    let response = {};\n    const {\n      readyState,\n      status,\n    } = event.target;\n\n    try {\n      if (readyState > 3 && status === 200) {\n        response = JSON.parse(event.target.responseText);\n        this.emit('complete', response);\n      } else {\n        const message = `Invalid readyState: ${readyState}, or status: ${status}.`;\n        this._xhrError(event, message);\n        return;\n      }\n    } catch (error) {\n      this._xhrError(event, 'Invalid JSON', error);\n      return;\n    }\n\n    this.inProgress = false;\n  }\n\n  /**\n   * XHR contains an error\n   *\n   * @description XHR has contained an error, and was unable to complete\n   * @param {object} event\n   * @param {object|string} message\n   * @param {object} error\n   * @fires Search#error\n   * @private\n   */\n  _xhrError(event, message = null, error = null) {\n    this.inProgress = false;\n    this.emit('error', { event, message, error });\n  }\n\n  /**\n   * XHR has been aborted\n   *\n   * @description This event only fires if there is an active XHR request that has been terminated\n   * @fires Search#aborted\n   * @private\n   */\n  _xhrAbort() {\n    this.emit('aborted');\n  }\n\n  /**\n   * Perform the search\n   *\n   * @param {string} term - Search term(s)\n   * @fires Search#initialized\n   * @fires Search#cancelled\n   */\n  execute(term) {\n    this.emit('initialized', { term });\n\n    if (this.inProgress) {\n      this.emit('cancelled');\n      this.xhr.abort();\n    }\n\n    this.inProgress = true;\n\n    const url = window.Theme.routes.search_url;\n    const params = {\n      q: term,\n      type: this.searchType,\n      view: this.view,\n    };\n\n    const searchParams = Object.keys(params).map(key => {\n      const value = params[key];\n      return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n    }).join('&');\n\n    this.xhr.open('get', `${url}?${searchParams}`);\n    this.xhr.setRequestHeader('Accept', 'application/json');\n    this.xhr.send();\n  }\n}\n\n/**\n * @description XHR initialized\n * @event Search#initialized\n * @type {object}\n */\n\n/**\n * @description XHR completed\n * @event Search#complete\n * @property {object} response - JSON response from end point\n */\n\n/**\n * @description XHR had an error\n * @event Search#error\n */\n\n/**\n * @description XHR cancelled due to user interaction. If an XHR is being\n *        processed, this does not terminate it\n * @event Search#cancelled\n */\n\n/**\n * @description XHR aborted due to user interaction, terminating previously executed XHR.\n * @event Search#aborted\n */\n","/**\n * Shows a list item component when result is an article, or a page\n *\n * @param contentItem\n * @returns {string}\n * @constructor\n */\nfunction ContentItem(contentItem) {\n  return `\n  <li class=\"search-flydown--content-item\">\n    <a href=\"${contentItem.url}\">${contentItem.title}</a>\n  </li>\n  `;\n}\n\n/**\n * Shows a header for the article and page results\n *\n * @param context\n * @returns {string}\n * @constructor\n */\nfunction ContentResultsHeader(context) {\n  return `\n    <h5 class=\"search-flydown--content-title\">\n      ${context.content_results.title}\n    </h5>\n  `;\n}\n\n/**\n * Shows a list of results from articles, or pages\n *\n * @param props\n * @returns {jQuery|HTMLElement}\n * @constructor\n */\nfunction ContentResults(props) {\n  const { content, context } = props;\n  const $title = ContentResultsHeader(context);\n  const contentItems = content.map(contentItem => ContentItem(contentItem));\n\n  return $(`\n    <div class=\"search-flydown--content-items\">\n      ${$title}\n\n      <ul class=\"search-flydown--content-items-list\">\n        ${contentItems.join('')}\n      </ul>\n    </div>\n  `);\n}\n\n/**\n * Shows a message when there are no article or page results\n *\n * @param props\n * @returns {jQuery|HTMLElement}\n * @constructor\n */\nfunction ContentNoResults(props) {\n  const { context } = props;\n  const $title = ContentResultsHeader(context);\n\n  return $(`\n    <div class=\"search-flydown--content-items\">\n      ${$title}\n\n      <p class=\"search-flydown--content-items-none\">\n        ${context.content_results.no_results}\n      </p>\n    </div>\n  `);\n}\n\n/**\n * Shows the product's compare_at_price, with connection for CurrencyConverter\n *\n * @param price\n * @returns {string}\n * @constructor\n */\nfunction ProductPriceCompareAt(price) {\n  return `\n  <span class=\"search-flydown--product-price--compare-at\">\n    <span class=\"money\">${price.compare_at_price}</span>\n  </span>\n  `;\n}\n\n/**\n * Shows the product's price, with connection for CurrencyConverter\n *\n * @param price\n * @returns {string}\n * @constructor\n */\nfunction ProductPriceMain(price) {\n  return `\n  <span class=\"search-flydown--product-price--main\">\n    <span class=\"money\">${price.price}</span>\n  </span>\n  `;\n}\n\n/**\n * Shows the product's prices\n *\n * @param props\n * @returns {string}\n * @constructor\n */\nfunction ProductPrice(props) {\n  const { price, onSale, consistentSaved } = props;\n  const $compareAt = onSale && consistentSaved ? ProductPriceCompareAt(price) : '';\n  const $price = ProductPriceMain(price);\n\n  return `\n    <span class=\"search-flydown--product-price ${onSale ? 'search-flydown--product-price-has-sale' : ''}\">\n      ${$price}\n      ${$compareAt}\n    </span>\n  `;\n}\n\n/**\n * Shows a product's main content\n *\n * @param product\n * @returns {string}\n * @constructor\n */\nfunction ProductContent(product) {\n  const $price = ProductPrice({\n    price: product.price,\n    onSale: product.on_sale,\n    consistentSaved: product.consistent_saved,\n  });\n\n  const swatchCount = product.swatch_count\n    ? `<span class=\"search-flydown--product-swatch-count\">${product.swatch_count}</span>`\n    : '';\n\n  return `\n    <div class=\"search-flydown--product-text\">\n      <span class=\"search-flydown--product-title\">\n        ${product.title}\n      </span>\n      ${$price}\n      ${swatchCount}\n    </div>\n  `;\n}\n\n/**\n * Shows a product's image\n *\n * @param image\n * @returns {string}\n * @constructor\n */\nfunction ProductImage(image) {\n  return `\n    <div class=\"search-flydown--product-image\">\n      ${image}\n    </div>\n  `;\n}\n\n/**\n * Shows a product list item component when result is a product\n *\n * @param product\n * @param enableImages\n * @returns {string}\n * @constructor\n */\nfunction ProductItem(product, enableImages) {\n  const $image = enableImages ? ProductImage(product.image) : '';\n  const $content = ProductContent(product);\n\n  return `\n    <a class=\"search-flydown--product search-flydown--product\" href=\"${product.url}\">\n      ${$image}\n      ${$content}\n    </a>\n  `;\n}\n\n/**\n * Shows a list of product results\n *\n * @param props\n * @returns {jQuery|HTMLElement}\n * @constructor\n */\nfunction ProductResults(props) {\n  const { products, enableImages } = props;\n  const productItems = products.map(product => ProductItem(product, enableImages));\n\n  return $(`\n    <div class=\"search-flydown--product-items\">\n      ${productItems.join('')}\n    </div>\n  `);\n}\n\n/**\n * Show a message when no product results are found\n *\n * @param props\n * @returns {jQuery|HTMLElement}\n * @constructor\n */\nfunction ProductNoResults(props) {\n  const { context, terms, category } = props;\n\n  let title = context.no_results_products.title.replace('*terms*', terms);\n  if (category) {\n    title = context.no_results_products.title_in_category\n      .replace('*terms*', terms)\n      .replace('*category*', category);\n  }\n\n  return $(`\n    <div class=\"search-flydown--product-items--none\" data-live-search-no-products>\n      <h5>\n        ${title}\n      </h5>\n      <p>\n        ${context.no_results_products.message}\n      </p>\n      <p>\n        <a class=\"search-flydown--continue\" href=\"${window.Theme.routes.all_products_collection_url}\">\n          ${context.view_all_products}\n        </a>\n      </p>\n    </div>\n  `);\n}\n\n/**\n * Show's the Results footer, directing customers to all products\n *\n * @param props\n * @returns {jQuery|HTMLElement}\n * @constructor\n */\nfunction ResultsFooter(props) {\n  const { context, terms, type } = props;\n\n  return $(`\n    <div class=\"search-flydown--footer\">\n      <a class=\"search-flydown--continue\" href=\"${window.Theme.routes.search_url}?q=${terms}&type=${type}\">\n        ${context.view_all_results}\n      </a>\n    </div>\n  `);\n}\n\nexport {\n  ContentResults,\n  ContentNoResults,\n  ProductResults,\n  ProductNoResults,\n  ResultsFooter,\n};\n","import $ from 'jquery';\nimport debounce from 'just-debounce';\n\nimport Search from '../../Search';\nimport layout from '../../Layout';\nimport SearchForm from './SearchForm';\n\nimport {\n  ContentResults,\n  ContentNoResults,\n  ProductResults,\n  ProductNoResults,\n  ResultsFooter,\n} from './LiveSearchTemplates';\n\nconst MAX_RESULTS = 7;\n\nexport default class LiveSearch {\n  constructor($els, settings) {\n    this.$el = $els.$el;\n    this.$header = $els.$header;\n\n    this.closeEvents = [];\n\n    this.settings = settings;\n    this.enableContent = this.settings.enable_content;\n    this.enableImages = this.settings.enable_images;\n    this.searchType = this.enableContent ? 'article,page,product' : 'product';\n    this.category = '';\n\n    const $form = this.$el.find('[data-live-search-form]');\n\n    this.$input = $form.find('[data-live-search-input]');\n    this.$button = $form.find('[data-live-search-submit]');\n    this.$takeOverButton = $form.find('[data-live-search-takeover-cancel]');\n    this.$filter = this.$el.find('[data-live-search-filter]');\n\n    this.$flyDown = this.$el.find('[data-live-search-flydown]');\n    this.$searchResults = this.$flyDown.find('[data-live-search-results]');\n    this.$searchPlaceholder = this.$flyDown.find('[data-live-search-placeholder]');\n    this.$quickLinks = this.$flyDown.find('[data-live-search-quick-links]');\n\n    this.staticSearch = new SearchForm(\n      this.$el,\n      {\n        liveSearch: true,\n        setCategory: category => { this.category = category; },\n      },\n    );\n\n    this.search = new Search({\n      view: 'header',\n      type: this.searchType,\n    });\n\n    this._search = this._search.bind(this);\n    this._documentFocus = this._documentFocus.bind(this);\n\n    this._searchCancelled = this._searchCancelled.bind(this);\n    this._searchComplete = this._searchComplete.bind(this);\n    this._searchError = this._searchError.bind(this);\n\n    this.search.on('cancelled', this._searchCancelled);\n    this.search.on('complete', this._searchComplete);\n    this.search.on('error', this._searchError);\n\n    this._closeEsc = e => {\n      if (e.key === 'Escape') {\n        e.stopPropagation();\n        this.$input.focus();\n        this._closeFlyDown(true);\n        this._closeTakeOver();\n      }\n    };\n\n    this.events = [\n      this.$input.on('keyup.live-search', debounce(this._search, 250)),\n      this.$input.on('focus.live-search', event => {\n        event.stopPropagation();\n        this._onSearchFocus();\n      }),\n      this.$takeOverButton.on('click.live-search', event => {\n        event.preventDefault();\n        this._closeTakeOver();\n      }),\n      this.$filter.on('change.live-search', this._search),\n    ];\n  }\n\n  open() {\n    // If is XS, pop the search out into a Takeover screen\n    if (layout.isLessThanBreakpoint('S')) {\n      this._openTakeOver();\n    }\n\n    if (this._shouldOpenFlyDown()) {\n      this._openFlyDown();\n    }\n\n    this.$input.focus();\n  }\n\n  unload() {\n    this.events.forEach($el => $el.off('.live-search'));\n\n    this.search.off('cancelled', this._searchCancelled);\n    this.search.off('complete', this._searchComplete);\n    this.search.off('error', this._searchError);\n\n    this.staticSearch.unload();\n  }\n\n  _onSearchFocus() {\n    this.$el.addClass('live-search--focused');\n\n    // If is XS, pop the search out into a Takeover screen\n    if (layout.isLessThanBreakpoint('S')) {\n      this._openTakeOver();\n    }\n\n    if (this._shouldOpenFlyDown()) {\n      this._openFlyDown();\n    }\n  }\n\n  _search(event) {\n    // Ignore non character key strokes\n    const invalidKeyStrokes = [\n      'Alt',\n      'ArrowRight',\n      'ArrowLeft',\n      'ArrowUp',\n      'ArrowDown',\n      'Capslock',\n      'Control',\n      'Escape',\n      'Meta',\n      'Shift',\n      'Tab',\n      'Enter',\n    ];\n\n    if (event.key && invalidKeyStrokes.indexOf(event.key) !== -1) {\n      return;\n    }\n\n    let terms = this.$input.val();\n    const hasTerms = terms.length > 0;\n\n    // If is XS, pop the search out into a Takeover screen\n    if (layout.isLessThanBreakpoint('S')) {\n      this._openTakeOver();\n    }\n\n    // Clear previous results\n    this.$searchResults.html('');\n\n    // If terms has length, this will be true\n    this._toggleButton(hasTerms);\n\n    if (hasTerms) {\n      this._openFlyDown();\n      this._updateFlyDown(true);\n\n      // Adds `*` after each word in search terms, doesn't add to last word\n      if (terms.indexOf(' ') > 0) {\n        terms = terms.split(' ').join('* ').trim();\n      }\n\n      // Adds `*` at the end of the search terms\n      terms = `${terms}*`;\n\n      const filter = this.$filter[0];\n\n      // Add field filter\n      terms = filter && filter.value ? `${terms} ${filter.value}` : terms;\n\n      this.search.execute(terms);\n    } else {\n      this._closeFlyDown(true);\n    }\n  }\n\n  _searchError(response) {\n    console.warn('Search had error');\n    console.log(response.message, response.error, response.event);\n    this._toggleButton(false);\n  }\n\n  /**\n   * Search has been cancelled due to new search being performed\n   *\n   * @private\n   */\n  _searchCancelled() {\n    // Searches are canceled on user interaction, UI should remain unchanged\n  }\n\n  _searchComplete(response) {\n    let {\n      content,\n      products,\n    } = response;\n\n    const {\n      terms,\n      sanitizedTerms,\n    } = response;\n\n    content = content.slice(0, MAX_RESULTS);\n    products = products.slice(0, MAX_RESULTS);\n\n    const {\n      enable_images: enableImages,\n      context,\n    } = this.settings;\n    const settings = {\n      products: {\n        results: {\n          products,\n          enableImages,\n        },\n        noResults: {\n          context,\n          terms: sanitizedTerms,\n          category: this.category,\n        },\n      },\n      content: {\n        results: {\n          context,\n          content,\n        },\n        noResults: {\n          context,\n        },\n      },\n      footer: {\n        context,\n        terms,\n        type: this.searchType,\n      },\n    };\n\n    const $productResults = products.length\n      ? ProductResults(settings.products.results)\n      : ProductNoResults(settings.products.noResults);\n\n    const $contentResults = content.length\n      ? ContentResults(settings.content.results)\n      : ContentNoResults(settings.content.noResults);\n\n    $productResults.find('.money').each((i, el) => {\n      el.innerHTML = Shopify.formatMoney( // eslint-disable-line no-param-reassign\n        el.innerHTML,\n        this.settings.money_format,\n      );\n    });\n\n    // Hide placeholder\n    // TODO: Lock minimum height?\n    this._updateFlyDown();\n\n    // Show results\n    this.$searchResults\n      .html($productResults)\n      .addClass('visible');\n\n    if (this.enableContent) {\n      this.$searchResults\n        .append($contentResults);\n    }\n\n    this.$searchResults\n      .append(ResultsFooter(settings.footer));\n\n    this._toggleButton(false);\n  }\n\n  /**\n   * Toggles search button while processing\n   *\n   * @param disable\n   * @private\n   */\n  _toggleButton(disable) {\n    if (disable) {\n      this.$button\n        .addClass('search-icon--processing')\n        .attr('disabled');\n    } else {\n      this.$button\n        .removeClass('search-icon--processing')\n        .removeAttr('disabled');\n    }\n  }\n\n  _shouldOpenFlyDown() {\n    const hasTerms = this.$input.val().length > 0;\n    const hasResults = this.$searchResults.children().length > 0;\n\n    if (hasTerms && hasResults) {\n      return true;\n    }\n\n    if (this.$quickLinks.length) {\n      return true;\n    }\n\n    return false;\n  }\n\n  _openFlyDown() {\n    if (this.$flyDown.data('is-open')) {\n      return;\n    }\n\n    const $window = $(window);\n    const $document = $(document);\n\n    // Only listen for events outside of the search flydown when its open\n    this.closeEvents = [\n      $window.on('keydown.live-search', this._closeEsc),\n      $document.on('focusin.live-search', this._documentFocus),\n      $document.on('touchstart.live-search', this._documentFocus),\n      $document.on('click.live-search', this._documentFocus),\n    ];\n\n    this._updateFlyDown();\n\n    this.$el.addClass('live-search--active');\n    this.$flyDown.data('is-open', true);\n  }\n\n  _updateFlyDown(placeholder = false) {\n    const hasTerms = this.$input.val().length > 0;\n    const hasNoResults = this.$searchResults.find('[data-live-search-no-products]').length === 0;\n    const hasPreviousResults = this.$searchResults.children().length > 0;\n    const hasQuickLinks = this.$quickLinks.length;\n\n    if (placeholder) {\n      this.$quickLinks.removeClass('visible');\n      this.$searchResults.removeClass('visible');\n      this.$searchPlaceholder.addClass('visible');\n    } else {\n      this.$searchPlaceholder.removeClass('visible');\n\n      if (hasTerms && hasNoResults && hasPreviousResults) {\n        this.$searchResults.addClass('visible');\n        this.$quickLinks.removeClass('visible');\n      } else if (hasQuickLinks) {\n        this.$searchResults.removeClass('visible');\n        this.$quickLinks.addClass('visible');\n      }\n    }\n  }\n\n  /**\n   * Close the FlyDown when no longer needed\n   *  - Keep focus styling if input is still being interacted with\n   *\n   * @param retainFocus\n   * @private\n   */\n  _closeFlyDown(retainFocus = false) {\n    if (!this.$flyDown.data('is-open')) {\n      return;\n    }\n\n    this.$flyDown.data('is-open', false);\n    this.$el.removeClass('live-search--active');\n\n    if (!retainFocus) {\n      this.$el.removeClass('live-search--focused');\n    }\n\n    this.closeEvents.forEach($el => $el.off('.live-search'));\n    this.closeEvents = [];\n  }\n\n  _openTakeOver() {\n    if (this.$header.hasClass('search--section')) {\n      document.body.classList.add('search-takeover-active');\n    }\n    document.body.classList.add('scroll-lock');\n    this.$el.addClass('live-search--takeover');\n  }\n\n  _closeTakeOver() {\n    document.body.classList.remove('scroll-lock');\n    document.body.classList.remove('search-takeover-active');\n    this.$el.removeClass('live-search--takeover');\n  }\n\n  /**\n   * When the focus element has changed, either by clicking, touching, or tabbing\n   * check to see if it is within the flydown\n   *\n   * @param event\n   * @private\n   */\n  _documentFocus(event) {\n    const $closest = $(event.target).closest('[data-live-search]');\n\n    if ($closest.length) {\n      return;\n    }\n\n    this._closeFlyDown();\n    this._closeTakeOver();\n  }\n}\n","import $ from 'jquery';\n\nconst eventHandlers = [];\nlet previousBreakpoint = null;\n\nfunction getBreakpoints() {\n  return window\n    .getComputedStyle(document.documentElement, ':before')\n    .getPropertyValue('content')\n    .replace(/\"/g, '')\n    .split(',');\n}\n\nfunction getBreakpoint() {\n  return window\n    .getComputedStyle(document.documentElement, ':after')\n    .getPropertyValue('content')\n    .replace(/\"/g, '');\n}\n\n$(window).on('resize', event => {\n  const currentBreakpoint = getBreakpoint();\n\n  if (previousBreakpoint !== currentBreakpoint) {\n    eventHandlers.forEach(eventHandler => {\n      eventHandler(event, {\n        previous: previousBreakpoint,\n        current: currentBreakpoint,\n      });\n    });\n  }\n\n  previousBreakpoint = currentBreakpoint;\n});\n\nfunction isLessThanBreakpoint(breakpoint, inclusive = false) {\n  const breakpoints = getBreakpoints();\n  const currentBreakpoint = getBreakpoint();\n  const comparison = breakpoints.indexOf(currentBreakpoint) - breakpoints.indexOf(breakpoint);\n\n  return inclusive ? comparison <= 0 : comparison < 0;\n}\n\nfunction isGreaterThanBreakpoint(breakpoint, inclusive = false) {\n  const breakpoints = getBreakpoints();\n  const currentBreakpoint = getBreakpoint();\n  const comparison = breakpoints.indexOf(currentBreakpoint) - breakpoints.indexOf(breakpoint);\n\n  return inclusive ? comparison >= 0 : comparison > 0;\n}\n\nfunction isBreakpoint(...breakpoints) {\n  const currentBreakpoint = getBreakpoint();\n  return breakpoints.some(breakpoint => breakpoint === currentBreakpoint);\n}\n\nfunction onBreakpointChange(eventHandler) {\n  if (eventHandlers.indexOf(eventHandler) === -1) {\n    eventHandlers.push(eventHandler);\n  }\n}\n\nfunction offBreakpointChange(eventHandler) {\n  const index = eventHandlers.indexOf(eventHandler);\n\n  if (index !== -1) {\n    eventHandlers.splice(index, 1);\n  }\n}\n\nexport default {\n  isLessThanBreakpoint,\n  isGreaterThanBreakpoint,\n  isBreakpoint,\n  onBreakpointChange,\n  offBreakpointChange,\n};\n","export default class Quantity {\n  constructor(el) {\n    this.$el = $(el);\n    this.$inputParent = this.$el.find('.form-field--qty-input');\n    this.$input = this.$el.find('[data-quantity-input]');\n    this.$selectParent = this.$el.find('.form-field--qty-select');\n    this.$select = this.$el.find('[data-quantity-select]');\n\n    this._watchSelect = this._watchSelect.bind(this);\n    this._watchInput = this._watchInput.bind(this);\n\n    this.$select.on('change.quantity', this._watchSelect);\n    this.$input.on('change.quantity', this._watchInput);\n  }\n\n  unload() {\n    this.$el.off('.quantity');\n  }\n\n  _validateValue(event) {\n    const baseValue = parseInt(event.currentTarget.value, 10);\n\n    return isNaN(baseValue) ? 1 : baseValue;\n  }\n\n  _watchSelect(event) {\n    const value = this._validateValue(event);\n\n    // Update input to match select\n    this.$input.val(value).trigger('change');\n\n    // Switch to quantity input when 10 or more\n    if (value >= 10) {\n      this.$inputParent\n        .removeClass('hidden')\n        .addClass('visible');\n\n      this.$input\n        .focus()\n        .removeAttr('tabindex')\n        .select();\n\n      this.$selectParent\n        .removeClass('visible')\n        .addClass('hidden');\n\n      this.$select.attr('tabindex', '-1');\n    }\n  }\n\n  _watchInput(event) {\n    this.$input.val(this._validateValue(event));\n  }\n}\n","import $ from 'jquery';\nimport Quantity from './helpers/Quantity';\n\nexport default class Forms {\n  constructor(el, selector = '.form-field-input') {\n    this.$el = $(el);\n    this.filledClass = 'form-field-filled';\n    this.fieldSelector = selector;\n\n    this.quantityItems = [];\n    this.$quantityWrapper = this.$el.find('[data-quantity-wrapper]');\n\n    this._toggleFilled = this._toggleFilled.bind(this);\n    this.$el.on('focus.forms', this.fieldSelector, this._toggleFilled);\n    this.$el.on('blur.forms', this.fieldSelector, this._toggleFilled);\n\n    this._checkFilled();\n\n    if (this.$quantityWrapper.length) {\n      this.$quantityWrapper.each((i, el) => {\n        this.quantityItems.push(\n          new Quantity(el),\n        );\n      });\n    }\n  }\n\n  unload() {\n    this.$el.off('.forms');\n\n    this.quantityItems.forEach(quantityItem => {\n      quantityItem.unload();\n    });\n  }\n\n  _checkFilled() {\n    this.$el.find(this.fieldSelector).each((i, el) => {\n      if ($(el).hasClass(this.filledClass)) return;\n\n      this._toggleFilled(null, el);\n    });\n  }\n\n  _toggleFilled(event = null, el = false) {\n    const target = event ? event.currentTarget : el;\n    const $target = $(target);\n    const { value } = target;\n\n    let isFilled = value.length > 0;\n\n    try {\n      isFilled = isFilled || $target.is(':-webkit-autofill');\n      $target.toggleClass(this.filledClass, isFilled);\n    } catch (e) {\n      $target.toggleClass(this.filledClass, isFilled);\n    }\n  }\n}\n"],"sourceRoot":""}